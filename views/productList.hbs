<div class="container mt-5">
  <h2 class="mb-4">Danh sách sản phẩm</h2>

  <table class="table table-bordered table-striped">
    <thead>
      <tr>
        <th>Tên sản phẩm</th>
        <th>Giá</th>
        <th>Màu sắc</th>
        <th>Size</th>
        <th>Mô tả</th>
      </tr>
    </thead>
    <tbody>
      {{#each products}}
        <tr class="product-row" data-id="{{this._id}}">
          <td>{{this.name}}</td>
          <td>{{this.price}}</td>
          <td>{{#each this.colors}}{{this}} {{/each}}</td>
          <td>{{#each this.size}}{{this}} {{/each}}</td>
          <td>{{this.description}}</td>
        </tr>
      {{/each}}
    </tbody>
  </table>

  <!-- Pagination -->
  {{#if totalPages}}
    <div class="d-flex justify-content-center">
      <nav aria-label="Page navigation">
        <ul class="pagination">
          {{#if prevPage}}
            <li class="page-item">
              <a class="page-link" href="/products?page={{prevPage}}" aria-label="Previous">
                <span aria-hidden="true">&laquo;</span>
              </a>
            </li>
          {{/if}}

          {{#each pages}}
            <li class="page-item {{#ifCond this ../currentPage}}active{{/ifCond}}">
              <a class="page-link" href="/products?page={{this}}">{{this}}</a>
            </li>
          {{/each}}

          {{#if nextPage}}
            <li class="page-item">
              <a class="page-link" href="/products?page={{nextPage}}" aria-label="Next">
                <span aria-hidden="true">&raquo;</span>
              </a>
            </li>
          {{/if}}
        </ul>
      </nav>
    </div>
  {{/if}}
</div>

<style>
  .product-row {
    cursor: pointer;
    position: relative;
    transition: background-color 0.3s ease;
  }

  .product-row:hover {
    background-color: #f8f9fa;
  }

  .edit-btn, .delete-btn {
    margin-right: 10px;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const rows = document.querySelectorAll('.product-row');

    rows.forEach(row => {
      row.addEventListener('click', function() {
        const id = row.getAttribute('data-id');
        window.location.href = `/product/id=${id}`;
      });
    });
  });
</script>